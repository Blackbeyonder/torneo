<p-toast></p-toast>


<div class="flex flex-row justify-content-end"><p-button label="Cerrar sesion" severity="danger" (click)="cerrarSesion()"></p-button></div>
<div class="flex flex-row justify-content-center pt-5">
    <div class="w-full md:w-10 shadow-2 border-round py-3">
        <div class="mb-2 pl-4"><p-button label="Crear" severity="success" (click)="showDialog({ isEdit: false, item: {}, category: 'torneorts' })"></p-button></div>
        <p-table #dt1 dataKey="id" [value]="tournaments.rts" [tableStyle]="{ 'width': '100%' }" [scrollable]="true"
            scrollHeight="30rem" [globalFilterFields]="['name', 'date', 'ubication', 'Participantes']"
            [responsiveLayout]="'scroll'" [showCurrentPageReport]="true" [rows]="5" [paginator]="false"
            currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros">
            <!-- Encabezado con Buscador -->
            <ng-template pTemplate="caption">
                <div class="flex justify-content-between align-items-center">
                    <h3 class="m-0">Lista de Torneos RTS</h3>
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" [(ngModel)]="searchText" (input)="onFilterGlobal(1,$event)" placeholder="Search keyword" />
                    </span>
                </div>
            </ng-template>

            <!-- Encabezado -->
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="name">Nombre <p-sortIcon field="name"></p-sortIcon></th>
                    <th pSortableColumn="date">Fecha <p-sortIcon field="date"></p-sortIcon></th>
                    <th>Ubicación</th>
                    <th>Participantes</th>
                    <th>Imagen</th>
                    <th>Acciones</th>
                </tr>
            </ng-template>

            <!-- Cuerpo -->
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>{{ item.name }}</td>
                    <td>{{ item.date }}</td>
                    <td>{{ item.ubication }}</td>
                    <td>
                        <ul>
                            <li *ngFor="let participante of item.participantes.split(',')">
                              {{ participante }}
                            </li>
                          </ul>
                    </td>
                    <td>
                        <img [src]="item.img" alt="" class="w-10rem h-5rem">
                    </td>

                    <td>
                        <div class="flex ">
                            <div class="mr-2 "> <p-button label="Editar" severity="info" (click)=" showDialog({ isEdit: true, item: item, category: 'torneorts' })"></p-button>
                            </div>
                            <div class="card flex justify-content-center gap-2">
                                
                                
                                <!-- ConfirmPopup para confirmar la acción -->
                                <p-confirmPopup></p-confirmPopup>
                              
                                <!-- Botón para borrar con confirmación -->
                                <p-button label="Borrar" severity="danger" (click)="confirm(item.idtorneoRts,'torneorts', $event)"></p-button>
                              </div>
                              
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>



<div class="flex flex-row justify-content-center pt-5">
   
    <div class="w-full md:w-10 shadow-2 border-round py-3">
        <div class="mb-2 pl-4"><p-button label="Crear" severity="success" (click)="showDialog({ isEdit: false, item: {}, category: 'torneopelea' })"></p-button></div>
        <p-table #dt2 dataKey="id2" [value]="tournaments.pelea" [tableStyle]="{ 'width': '100%' }" [scrollable]="true"
            scrollHeight="30rem" [globalFilterFields]="['name', 'date', 'ubication', 'Participantes']"
            [responsiveLayout]="'scroll'" [showCurrentPageReport]="true" [rows]="5" [paginator]="false"
            currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros">
            <!-- Encabezado con Buscador -->
            <ng-template pTemplate="caption">
                <div class="flex justify-content-between align-items-center">
                    <h3 class="m-0">Lista de Torneos Pelea</h3>
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" [(ngModel)]="searchText2" (input)="onFilterGlobal(2,$event)" placeholder="Search keyword" />
                    </span>
                </div>
            </ng-template>

            <!-- Encabezado -->
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="name">Nombre <p-sortIcon field="name"></p-sortIcon></th>
                    <th pSortableColumn="date">Fecha <p-sortIcon field="date"></p-sortIcon></th>
                    <th>Ubicación</th>
                    <th>Participantes</th>
                    <th>Imagen</th>
                    <th>Acciones</th>
                </tr>
            </ng-template>

            <!-- Cuerpo -->
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>{{ item.name }}</td>
                    <td>{{ item.date }}</td>
                    <td>{{ item.ubication }}</td>
                    <td>
                        <ul>
                            <li *ngFor="let participante of item.participantes.split(',')">
                              {{ participante }}
                            </li>
                          </ul>
                    </td>
                    <td>
                        <img [src]="item.img" alt="" class="w-10rem h-5rem">
                    </td>

                    <td>
                        <div class="flex ">
                            <div class="mr-2 "> <p-button label="Editar" severity="info" (click)=" showDialog({ isEdit: true, item:item, category: 'torneopelea' })"></p-button>
                            </div>
                            <div class="card flex justify-content-center gap-2">
                              
                                
                              
                                <!-- Botón para borrar con confirmación -->
                                <p-button label="Borrar" severity="danger" (click)="confirm(item.idtorneopelea,'torneopelea', $event)"></p-button>
                              </div>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

